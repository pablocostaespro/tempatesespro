(function(t){function i(){n(),o(),new e}function e(){var i=this;this.scormData=new ScormData,this.telaAtual=this.scormData.get("cmi.core.lesson_location")||0;var e=JSON.parse(this.scormData.get("cmi.suspend_data")||"{}");this.visited=e.visited||[],this.telas=[],c=t(".section, header"),c.each(function(e,s){i.telas.push({id:e,element:t(s),visited:!1})});var s=this.telas.find(t=>t.id==i.telaAtual);t("html,body").animate({scrollTop:s.element.offset().top-40},900),t(window).scroll(function(){i.checkSection()}),i.setLocation()}function s(){var i=l.height(),e=l.scrollTop(),s=null;return t.each(c,function(){var o=t(this),a=o.outerHeight(),n=o.offset().top,c=n+a;c>=e&&(n<=e+i/2||n<=e+i-75&&a<i/2)&&(s=o)}),s}function o(){t(".zoom[data-toggle='modal']").each(function(i){t(this).bind("click",function(){a(t(this).find("> img"))})})}function a(i){var e=t("<div class='modal'><div class='bg-modal'></div></div>");e.append(i.clone(!1)),e.bind("click",function(){e.removeClass("show"),setTimeout(function(){e.remove()},250)}),t("body").append(e),e.addClass("in"),setTimeout(function(){e.addClass("show")},10)}function n(){t(".citacao-longa").each(function(i){var e=t(this);0==e.parents(".caixa-destaque-container").length&&e.wrap("<div class='moldura-citacao'></div>")})}var c;e.prototype.checkSection=function(){var t=s();if(t){var i=this.telas.find(i=>i.element[0].id===t[0].id);i.id!=this.telaAtual&&(this.telaAtual=i.id,this.setLocation())}},e.prototype.setLocation=function(){var i=this;clearTimeout(this.timeOut),i.timeOut=setTimeout(()=>{isNaN(i.visited.find(t=>t==i.telaAtual))&&(i.visited.push(i.telaAtual),i.visited.sort());var e=JSON.parse(this.scormData.get("cmi.suspend_data")||"{}");e=t.extend({},e,{visited:i.visited}),i.scormData.set("cmi.suspend_data",JSON.stringify(e)),i.scormData.set("cmi.core.lesson_location",i.telaAtual),console.log("Visitados: ",i.visited.length," - Total: ",c.length,i.visited),i.visited.length>=c.length&&i.scormData.set("cmi.core.lesson_status","completed")},750)};var l=t(window);t(".voltar-topo").each(function(){t(this).click(function(){return t("html,body").animate({scrollTop:0},"slow"),!1})}),t(window).scroll(function(){t(window).scrollTop()+t(window).height()>t(document).height()-250?t(".voltar-topo").addClass("ative"):t(".voltar-topo").removeClass("ative")}),t(document).ready(function(){i();var e=100;t(".bt-mais").bind("click",function(){t(".submenu").toggleClass("active")}),t(".submenu .bt-aumenta").bind("click",function(){e+=25,e>200&&(e=100),t("html").css("font-size",e+"%")}),t(".submenu .bt-contraste").bind("click",function(){t("body").toggleClass("contraste")}),t(".submenu .bt-marcacao").bind("click",function(){t(document).trigger("habilitaHighlight"),t(this).toggleClass("ativo")}),t(".submenu .bt-postit").bind("click",function(){t(document).trigger("inserePostit")}),setTimeout(function(){t(".circle_area .circle_slider").css("height",t(".circle_element .circle").height())},500);var s=45*(t(".unleash_slider .unleash_slide").length-1);t(".unleash_slider .unleash_slide").css("width","calc(100% - "+s+"px)")})})(jQuery);