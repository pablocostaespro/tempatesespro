(function(t){function e(t){return-1!=t.indexOf("lesson_location")?"cmi.location":-1!=t.indexOf("lesson_status")?"cmi.completion_status":-1!=t.indexOf("raw")?"cmi.score.raw":-1!=t.indexOf("max")?"cmi.score.max":-1!=t.indexOf("min")?"cmi.score.min":-1!=t.indexOf("total_time")?"cmi.total_time":-1!=t.indexOf("session_time")?"cmi.session_time":t}function i(t){var e=t.split(":");return e[e.length-1]=e[e.length-1]+"S",e[e.length-2]=e[e.length-2]+"M",e[e.length-3]=e[e.length-3]+"H","PT"+e.join("")}function n(t){t=parseInt(t/1e3);var e=t%60;t-=e;var i=t%3600;t-=i,e=parseInt(Math.round(100*e)/100,10);var n=new String(e),s=n,o="";if(-1!=n.indexOf(".")&&(s=n.substring(0,n.indexOf(".")),o=n.substring(n.indexOf(".")+1,n.length)),s.length<2&&(s="0"+s),n=s,o.length&&(n=n+"."+o),t%3600!=0)var a=0;else a=t/3600;if(i%60!=0)var c=0;else c=i/60;new String(a).length<2&&(a="0"+a),new String(c).length<2&&(c="0"+c);var r=a+":"+c+":"+n;return r}function s(t){var e=0,i=1e3*Number(t.split(":")[2]),n=60*Number(t.split(":")[1])*1e3,s=3600*Number(t.split(":")[0])*1e3;return e=s+n+i,e}var o=window.ScormData||{};new Date;o=function(){function e(e,i){var n=this;initTime=(new Date).getTime(),this.scorm=pipwerks.SCORM,this.scorm.connection.initialize(),"1.2"!=this.scorm.version&&n.scorm.connection.isActive?"2004"==this.scorm.version&&(n.defaultdata={"cmi.suspend_data":"","cmi.location":"","cmi.completion_status":"incomplete","cmi.score.raw":0,"cmi.score.max":0,"cmi.score.min":0}):n.defaultdata={"cmi.suspend_data":"","cmi.core.lesson_location":"","cmi.core.lesson_status":"incomplete","cmi.core.score.raw":0,"cmi.core.score.max":0,"cmi.core.score.min":0,"cmi.core.total_time":"00:00:00","cmi.core.session_time":"00:00:00"},n.data=t.extend({},n.defaultdata,{}),this.init()}return e}(),o.prototype.init=function(t,e){var i=this,n={};onkeydown=onkeyup=function(t){t=t||event,n[t.keyCode]="keydown"==t.type,n[86]&&n[69]&&n[68]&&i.clearData()},this.getValues(),window.onbeforeunload=function(){i.scorm.connection.isActive&&(i.set("cmi.exit","suspend"),i.scorm.quit())}},o.prototype.getValues=function(){var t;for(var i in this.data)-1==i.indexOf("session_time")&&(this.scorm.connection.isActive?("2004"==this.scorm.version&&(i=e(i)),t=this.scorm.data.get(i)||this.data[i]):t=Cookies.get(i)||this.data[i],-1!=i.indexOf("suspend_data")&&(t=atob(t)),this.data[i]=t);return this.data},o.prototype.get=function(t){return this.scorm.connection.isActive&&"2004"==this.scorm.version&&(t=e(t)),this.data[t]},o.prototype.set=function(t,o){var a,c,r=(new Date).getTime(),m=r-initTime,d="cmi.core.session_time";if(a=-1!=t.indexOf("suspend_data")?btoa(o):o,this.scorm.connection.isActive)"2004"==this.scorm.version?(t=e(t),d=e(d),c=i(n(m))):c=n(m),this.scorm.data.set(d,c),t&&t!=d&&this.scorm.data.set(t,a),this.scorm.save();else{var u=parseInt(s(this.data["cmi.core.total_time"]));Cookies.set("cmi.core.session_time",n(m),{expires:7,path:""}),Cookies.set("cmi.core.total_time",n(u),{expires:7,path:""}),Cookies.set(t,a,{expires:7,path:""})}return this.getValues()},o.prototype.clearData=function(){var t=this;if(this.scorm.connection.isActive);else for(var e in t.defaultdata)this.set(e,this.defaultdata[e])},window.ScormData=o})(jQuery);